---
import BaseLayout from './base-layout.astro';
const {frontmatter} = Astro.props;

import LoudTakeaway from '../components/loud-takeaway.astro';
---

<BaseLayout 
	title={frontmatter.title}
	description={frontmatter.description}
  collection='work'
>
	<article class="work-wrapper u-mrg-be-3xl">
		<div class="u-container">
      <div class="work-inner">
        <div class="work-header u-pad-b-xl">
          <!-- <img src={frontmatter.cover} alt={frontmatter.coverAlt} class="work-header__image u-pad-be-xl" /> -->
          <h1 class="u-font-display u-fontsize-5">{frontmatter.title}</h1>
        </div>
        <div class="work-intro u-mrg-be-l">          
          <div class="work-intro__skills">
            <ul class="skills-list">
              {frontmatter.skills.map(skill => (
                <li class="skills-list__skill u-fontsize-1">{skill}</li>
              ))}
            </ul>
          </div>
          <div class="work-intro__copy">
            <p class="pre-heading u-subtitle u-mrg-be-xs">
              {frontmatter.introPreheading ? frontmatter.introPreheading : 'Intro'}
            </p>
            <h3 class="u-font-body u-fontsize-2">{frontmatter.intro}</h3>
          </div>
        </div>
        <div class="work-takeaways">
          <p class="pre-heading u-subtitle u-mrg-be-xs">{frontmatter.takeawaysPreheading}</p>
          <ol class="takeaways-wrapper">
            {frontmatter.takeaways.map(burger => (
              <LoudTakeaway title={burger.title} number={burger.number} moreLink={burger.moreLink} />
            ))}
          </ol>
        </div>
        <div class="work-content u-wysiwyg">
          <slot />
        </div>
      </div>
    </div>
	</article>
</BaseLayout>

<style>

.work-inner {
  --max-content-width: min(800px, 100%);
  max-width: var(--max-content-width);
  margin: 0 auto;

  @media (min-width: 1200px) {
    --max-content-width: min(1000px, 100%);
  }
}

.work-header {
  border-bottom: 2px solid var(--border-primary);

  h1 {
    color: var(--accent-2);
  }
}

.work-intro {
  display: flex;
  flex-direction: column;
  
  @media (min-width: 1200px) {
    flex-direction: row-reverse;
    gap: var(--space-l);    
  }

  .work-intro__skills {
    margin-block: var(--space-xl);

    @media (min-width: 1200px) {
      margin-block-start: calc(var(--space-xl) + var(--space-l));
      margin-block-end: 0;
    } 

    .skills-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: var(--space-s);
      list-style-type: none;

      .skills-list__skill {
        display: flex;

        &:before {
          display: flex;
          height: 40px;
          width: 43px;
          content: url('../assets/icons/purple_check.svg');
          margin-inline-end: var(--space-xs);
          border: 3px solid var(--bg-fourth);
          border-radius: 5px;
          align-items: flex-end;
          justify-content: center;
          background: var(--bg-fourth);
          flex-shrink: 0;
        }
      }
    }
  }

  .work-intro__copy {
    
    @media (min-width: 1200px) {
      padding-block-start: var(--space-xl);
      padding-inline-end: var(--space-l);
      border-inline-end: 2px solid var(--border-primary);
      max-width: min(720px, 100%);
      position: relative;

      &:after {
        /* Fake border visually joining up elements */
        content: "";
        display: block;
        position: absolute;
        height: var(--space-2xl);
        width: 2px;
        background-color: var(--border-primary);
        bottom: calc(-1* var(--space-2xl));
        right: -2px;
      }
    }    

    .pre-heading {
      color: var(--accent-2);
    }
  }
}

.work-takeaways {
  
  .pre-heading {
    color: var(--accent-2);
  }

  .takeaways-wrapper {
    display: grid;
    gap: var(--space-s);
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    list-style-type: none;

    @media (min-width: 1200px) {
      grid-template-columns: repeat(2, 1fr);
    }
  }
}

.work-content {

  @media (min-width: 1200px) {
    max-width: min(720px, 100%);
  }

  h2 {
    border-top: 2px solid var(--border-primary);
    margin-block-start: var(--space-2xl);
    padding-block-start: var(--space-m);
  }
}

</style>